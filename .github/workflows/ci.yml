
  name: CI Pipeline

on:
  push:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      # 1. Checkout code
      - name: Checkout code
        uses: actions/checkout@v4

      # 2. Build project (static HTML build simulation)
      - name: Build project
        run: |
          echo "Building project..."
          mkdir -p build
          cp index.html build/
          echo "Build completed successfully"

      # 3. Run tests (basic check)
      - name: Run tests
        run: |
          echo "Running tests..."
          if [ -f index.html ]; then
            echo "Test passed: index.html exists"
          else
            echo "Test failed: index.html missing"
            exit 1
          fi

      # 4. Generate output logs
      - name: Generate logs
        run: |
          echo "CI pipeline executed on $(date)" > ci-log.txt
          cat ci-log.txt

      # 5. Send Slack notification (FINAL STEP)
      - name: Send Slack notification
        if: always()
        run: |
          curl -X POST -H 'Content-type: application/json' \
          --data "{\"text\":\"âœ… CI Pipeline completed for *devops-webapp*\\nStatus: *${{ job.status }}*\"}" \
          ${{ secrets.SLACK_WEBHOOK }}



